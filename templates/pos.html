<!doctype html>
{% load static %}

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>BETA-POS</title>

    <!-- Favicon -->
    <link rel="shortcut icon" href="{%static 'assets/images/favicon.ico' %}" />
    <link rel="stylesheet" href="{%static 'assets/css/backend-plugin.min.css' %}">
    <link rel="stylesheet" href="{%static 'assets/css/backend.css?v=1.0.0' %}">
    <link rel="stylesheet" href="{%static 'assets/vendor/@fortawesome/fontawesome-free/css/all.min.css' %}">
    <link rel="stylesheet" href="{%static 'assets/vendor/line-awesome/dist/line-awesome/css/line-awesome.min.css' %}">
    <link rel="stylesheet" href="{%static 'assets/vendor/remixicon/fonts/remixicon.css' %}">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">



    <style>
        .head-tr-class th {
            background-color: #FF7E41;
        }

        .product-tr td {
            background-color: #f7b596;
        }

        .hover-card-class:hover {
            border: 1px solid black;
            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;

        }
    </style>
</head>
{% block content %}

<body class="  ">
    <!-- loader Start -->
    <div id="loading">
        <div id="loading-center">
        </div>
    </div>
    <!-- loader END -->
    <!-- Wrapper Start -->
    <div class="iq-top-navbar">
        <div class="iq-navbar-custom">
            <nav class="navbar navbar-expand-lg navbar-light p-0">
                <div class="iq-navbar-logo d-flex align-items-center justify-content-between">
                    <i class="ri-menu-line wrapper-menu"></i>
                    <a href="{%url 'Index' %}" class="header-logo">
                        <img src="{%static 'assets/images/logo.png' %}" class="img-fluid rounded-normal" alt="logo">
                        <h5 class="logo-title ml-3">BETA-POS</h5>

                    </a>
                </div>
                <div class="iq-search-bar device-search">
                    <form action="#" class="searchbox">
                        <!-- <a class="search-link" href="#"><i class="ri-search-line"></i></a>
                        <input type="text" class="text search-input" placeholder="Search here..."> -->
                    </form>
                </div>
                <div class="d-flex align-items-center">
                    <a class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                        aria-controls="navbarSupportedContent" aria-label="Toggle navigation">
                        <i class="ri-menu-3-line"></i>
                    </a>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav ml-auto navbar-list align-items-center">
                            <li class="nav-item nav-icon dropdown">
                                <a href="{%url 'Index' %}" class=" dropdown-toggle btn border add-btn">
                                    Dashboard
                                </a>

                            </li>
                            <li>
                                <a href="#" class="btn border add-btn shadow-none mx-2 d-none d-md-block"
                                    data-toggle="modal" data-target="#new-order"><i class="las la-plus mr-2"></i>New
                                    Order</a>
                            </li>
                            <li class="nav-item nav-icon search-content">
                                <a href="#" class="search-toggle rounded" id="dropdownSearch" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                    <i class="ri-search-line"></i>
                                </a>
                                <div class="iq-search-bar iq-sub-dropdown dropdown-menu"
                                    aria-labelledby="dropdownSearch">
                                    <form action="#" class="searchbox p-2">
                                        <div class="form-group mb-0 position-relative">
                                            <input type="text" class="text search-input font-size-12"
                                                placeholder="type here to search...">
                                            <a href="#" class="search-link"><i class="las la-search"></i></a>
                                        </div>
                                    </form>
                                </div>
                            </li>
                            <li class="nav-item nav-icon dropdown">
                                <a href="#" class="search-toggle dropdown-toggle" id="dropdownMenuButton2"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" class="feather feather-mail">
                                        <path
                                            d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z">
                                        </path>
                                        <polyline points="22,6 12,13 2,6"></polyline>
                                    </svg>
                                    <span class="bg-primary"></span>
                                </a>
                                <div class="iq-sub-dropdown dropdown-menu" aria-labelledby="dropdownMenuButton2">
                                    <div class="card shadow-none m-0">
                                        <div class="card-body p-0 ">
                                            <div class="cust-title p-3">
                                                <div class="d-flex align-items-center justify-content-between">
                                                    <h5 class="mb-0">All Messages</h5>
                                                    <a class="badge badge-primary badge-card" href="#">3</a>
                                                </div>
                                            </div>
                                            <div class="px-3 pt-0 pb-0 sub-card">
                                                <a href="#" class="iq-sub-card">
                                                    <div class="media align-items-center cust-card py-3 border-bottom">
                                                        <div class="">
                                                            <img class="avatar-50 rounded-small"
                                                                src="../assets/images/user/01.jpg" alt="01">
                                                        </div>
                                                        <div class="media-body ml-3">
                                                            <div
                                                                class="d-flex align-items-center justify-content-between">
                                                                <h6 class="mb-0">Emma Watson</h6>
                                                                <small class="text-dark"><b>12 : 47 pm</b></small>
                                                            </div>
                                                            <small class="mb-0">Lorem ipsum dolor sit amet</small>
                                                        </div>
                                                    </div>
                                                </a>
                                                <a href="#" class="iq-sub-card">
                                                    <div class="media align-items-center cust-card py-3 border-bottom">
                                                        <div class="">
                                                            <img class="avatar-50 rounded-small"
                                                                src="../assets/images/user/02.jpg" alt="02">
                                                        </div>
                                                        <div class="media-body ml-3">
                                                            <div
                                                                class="d-flex align-items-center justify-content-between">
                                                                <h6 class="mb-0">Ashlynn Franci</h6>
                                                                <small class="text-dark"><b>11 : 30 pm</b></small>
                                                            </div>
                                                            <small class="mb-0">Lorem ipsum dolor sit amet</small>
                                                        </div>
                                                    </div>
                                                </a>
                                                <a href="#" class="iq-sub-card">
                                                    <div class="media align-items-center cust-card py-3">
                                                        <div class="">
                                                            <img class="avatar-50 rounded-small"
                                                                src="../assets/images/user/03.jpg" alt="03">
                                                        </div>
                                                        <div class="media-body ml-3">
                                                            <div
                                                                class="d-flex align-items-center justify-content-between">
                                                                <h6 class="mb-0">Kianna Carder</h6>
                                                                <small class="text-dark"><b>11 : 21 pm</b></small>
                                                            </div>
                                                            <small class="mb-0">Lorem ipsum dolor sit amet</small>
                                                        </div>
                                                    </div>
                                                </a>
                                            </div>
                                            <a class="right-ic btn btn-primary btn-block position-relative p-2" href="#"
                                                role="button">
                                                View All
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="nav-item nav-icon dropdown">
                                <a href="#" class="search-toggle dropdown-toggle" id="dropdownMenuButton"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" class="feather feather-bell">
                                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                                    </svg>
                                    <span class="bg-primary "></span>
                                </a>
                                <div class="iq-sub-dropdown dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    <div class="card shadow-none m-0">
                                        <div class="card-body p-0 ">
                                            <div class="cust-title p-3">
                                                <div class="d-flex align-items-center justify-content-between">
                                                    <h5 class="mb-0">Notifications</h5>
                                                    <a class="badge badge-primary badge-card" href="#">3</a>
                                                </div>
                                            </div>
                                            <div class="px-3 pt-0 pb-0 sub-card">
                                                <a href="#" class="iq-sub-card">
                                                    <div class="media align-items-center cust-card py-3 border-bottom">
                                                        <div class="">
                                                            <img class="avatar-50 rounded-small"
                                                                src="../assets/images/user/01.jpg" alt="01">
                                                        </div>
                                                        <div class="media-body ml-3">
                                                            <div
                                                                class="d-flex align-items-center justify-content-between">
                                                                <h6 class="mb-0">Emma Watson</h6>
                                                                <small class="text-dark"><b>12 : 47 pm</b></small>
                                                            </div>
                                                            <small class="mb-0">Lorem ipsum dolor sit amet</small>
                                                        </div>
                                                    </div>
                                                </a>
                                                <a href="#" class="iq-sub-card">
                                                    <div class="media align-items-center cust-card py-3 border-bottom">
                                                        <div class="">
                                                            <img class="avatar-50 rounded-small"
                                                                src="../assets/images/user/02.jpg" alt="02">
                                                        </div>
                                                        <div class="media-body ml-3">
                                                            <div
                                                                class="d-flex align-items-center justify-content-between">
                                                                <h6 class="mb-0">Ashlynn Franci</h6>
                                                                <small class="text-dark"><b>11 : 30 pm</b></small>
                                                            </div>
                                                            <small class="mb-0">Lorem ipsum dolor sit amet</small>
                                                        </div>
                                                    </div>
                                                </a>
                                                <a href="#" class="iq-sub-card">
                                                    <div class="media align-items-center cust-card py-3">
                                                        <div class="">
                                                            <img class="avatar-50 rounded-small"
                                                                src="../assets/images/user/03.jpg" alt="03">
                                                        </div>
                                                        <div class="media-body ml-3">
                                                            <div
                                                                class="d-flex align-items-center justify-content-between">
                                                                <h6 class="mb-0">Kianna Carder</h6>
                                                                <small class="text-dark"><b>11 : 21 pm</b></small>
                                                            </div>
                                                            <small class="mb-0">Lorem ipsum dolor sit amet</small>
                                                        </div>
                                                    </div>
                                                </a>
                                            </div>
                                            <a class="right-ic btn btn-primary btn-block position-relative p-2" href="#"
                                                role="button">
                                                View All
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="nav-item nav-icon dropdown caption-content">
                                <a href="#" class="search-toggle dropdown-toggle" id="dropdownMenuButton4"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <img src="{%static 'assets/images/user/1.png' %}" class="img-fluid rounded"
                                        alt="user">
                                </a>
                                <div class="iq-sub-dropdown dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    <div class="card shadow-none m-0">
                                        <div class="card-body p-0 text-center">
                                            <div class="media-body profile-detail text-center">
                                                <img src="{%static 'assets/images/page-img/profile-bg.jpg' %}"
                                                    alt="profile-bg" class="rounded-top img-fluid mb-4">
                                                <img src="{%static 'assets/images/user/1.png' %}" alt="profile-img"
                                                    class="rounded profile-img img-fluid avatar-70">
                                            </div>
                                            <div class="p-3">
                                                <h5 class="mb-1">{{request.user}}</h5>
                                                <p class="mb-0">Since {{request.user.added_date}}</p>
                                                <div class="d-flex align-items-center justify-content-center mt-3">
                                                    <a href="" class="btn border mr-2">Profile</a>
                                                    <a href="{%url 'SignOut' %}" class="btn border">Sign Out</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
    </div>
    <div class="wrapper" style="margin-top: 100px !important;">
        <!-- <div class="content-page"> -->
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-12 col-lg-6">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between">
                            <div class="header-title">
                                <h4 class="card-title">Invoice <span
                                        style="text-align: right;">#{{order.invoice_number}}</span></h4>
                            </div>
                        </div>
                        <div class="card-body">
                            {% for message in messages %}
                            <div class="alert {{message.tags}} " role="alert">
                                <div class="iq-alert-text"><b>Alert</b> {{message}}</div>
                            </div>
                            {% endfor %}
                            <form id="orderForm">
                                <div class="input-group mb-3">
                                    <input type="hidden" id="orderId" name="order_id" value="{{ order.id }}">
                                    <input type="text" id="customerInput" name="customer" placeholder="Choose Customer"
                                        aria-describedby="button-addon2" class="form-control"
                                        value="{{ order.customer }}">
                                    <button class="btn btn-outline-primary" type="button" data-toggle="modal"
                                        data-target=".bd-example-modal-lg" data-toggle="tooltip" data-placement="top"
                                        title="" data-original-title="Add Customer" id="button-addon2">
                                        <svg class="svg-icon" id="p-dash10" width="20" height="20"
                                            xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                            stroke-linejoin="round">
                                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="8.5" cy="7" r="4"></circle>
                                            <polyline points="17 11 19 13 23 9"></polyline>
                                        </svg>
                                    </button>
                                </div>
                            </form>


                            <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-hidden="true">
                                <div class="modal-dialog modal-lg">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title">Add new Customer</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <form method="post" action="{%url 'add_customer' order.id %}">
                                                {% csrf_token %}
                                                <div class="row">
                                                    <div class="form-group col-md-6">
                                                        <label for="fname">Customer Name:</label>
                                                        <input type="text" class="form-control" name="name" id="fname"
                                                            placeholder="Customer Name" data-errors="Please Enter Name."
                                                            required>
                                                        <div class="help-block with-errors"></div>
                                                    </div>
                                                    <div class="form-group col-md-6">
                                                        <label for="lname">Phone:</label>
                                                        <input type="number" class="form-control" name="phone"
                                                            id="lname" placeholder="Phone Number">
                                                    </div>

                                                    <div class="form-group col-md-6">
                                                        <label for="email">Email:</label>
                                                        <input type="email" name="email" class="form-control" id="email"
                                                            placeholder="Email">
                                                    </div>
                                                    <div class="form-group col-md-6">
                                                        <div class="form-group">
                                                            <label>Gst Number:</label>
                                                            <input type="text" class="form-control" name="gst"
                                                                id="lname" placeholder="Gst Number">

                                                        </div>
                                                    </div>
                                                </div>
                                                <hr>
                                                <h5 class="mb-3">Address</h5>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div class="form-group">
                                                            <label>Address</label>
                                                            <textarea class="form-control" rows="4"
                                                                name="contact_info"></textarea>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>City *</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter City" name="city" required>
                                                            <div class="help-block with-errors"></div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>State *</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter State" name="state" required>
                                                            <div class="help-block with-errors"></div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>Country *</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter Country" name="country" required>
                                                            <div class="help-block with-errors"></div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>Pincode *</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter Pincode" name="pincode" required>
                                                            <div class="help-block with-errors"></div>
                                                        </div>
                                                    </div>
                                                </div>


                                                <button type="submit" class="btn btn-primary">Add Customer</button>
                                            </form>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-dismiss="modal">Close</button>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tableitems" id="orderItemsTable">
                        {% include 'ajaxtemplates/order_items_table.html' %}
                    </div>
                </div>



                <div class="col-sm-12 col-lg-6">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between">
                            <div class="header-title">
                                <h4 class="card-title">Products</h4>
                            </div>
                        </div>
                        <div class="card-body">
                            <form id="search-form">
                                <input type="text" class="form-control" name="search" id="search-input"
                                    placeholder="Search Product By code or name">
                            </form>
                            <div class="product-table mt-3 bg-light-info">
                                <div class="" style="height: 200px !important;overflow-y: scroll;">
                                    <div class="table table-striped">
                                        <div id="product-table-body" class="row p-3">



                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="customerdetails">

                        {% include 'ajaxtemplates/customerdetailsonpos.html'%}
                    </div>



                </div>
            </div>
        </div>
    </div>

    <!-- Wrapper End-->
    <footer class="iq-footer">
        <div class="container-fluid">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-6">
                            <ul class="list-inline mb-0">
                                <li class="list-inline-item"><a href="#">Privacy Policy</a></li>
                                <li class="list-inline-item"><a href="#">Terms of Use</a></li>
                            </ul>
                        </div>
                        <div class="col-lg-6 text-right">
                            <span class="mr-1">
                                <script>document.write(new Date().getFullYear())</script>Â©
                            </span> <a href="#" class="">BETA-POS</a>.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    {% endblock %}
    <!-- Backend Bundle JavaScript -->
    <script src="{%static 'assets/js/backend-bundle.min.js' %}"></script>

    <!-- Table Treeview JavaScript -->
    <script src="{%static 'assets/js/table-treeview.js' %}"></script>

    <!-- Chart Custom JavaScript -->
    <script src="{%static 'assets/js/customizer.js' %}"></script>

    <!-- Chart Custom JavaScript -->
    <script async src="{%static 'assets/js/chart-custom.js' %}"></script>

    <!-- app JavaScript -->
    <script src="{%static 'assets/js/app.js' %}"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <!-- custome scripts -->

    <script>
        // product serach on search input 
        $(document).ready(function () {
            $('#search-input').keyup(function () {
                var query = $(this).val();
                $.ajax({
                    url: "{% url 'search_product' %}",
                    data: {
                        'search': query
                    },
                    dataType: 'json',
                    success: function (data) {
                        $('#product-table-body').empty();
                        if (data.products.length > 0) {
                            data.products.forEach(function (product) {
                                var row =
   
                            '<div class="col-md-4">' +
                                '<a href="#" class="add-to-order" data-product-id="' + product.id + '">' +
                                    '<div class="card text-center p-3 hover-card-class">' +
                                        '<h4>' + product.name + '</h4>' +
                                        '<h6>Price: ' + product.price + ' (' + product.tax + ')</h6>' +
                                        '<p>Stock: ' + product.stock + '</p>' +
                                    '</div>' +
                                '</a>' +
                            '</div>';

                                $('#product-table-body').append(row);
                            });
                        } else {
                            $('#product-table-body').append('<tr><td colspan="5">No products found</td></tr>');
                        }
                    },
                    error: function (xhr, status, error) {
                        console.error('AJAX Error:', status, error);
                    }
                });
            });
        });


        // customer prediction on customer perdiction input 

        $(document).ready(function () {
            if (typeof $.ui !== 'undefined') {
                console.log("jQuery UI loaded successfully.");
            } else {
                console.log("Error: jQuery UI not loaded.");
            }

            var customers = [
                {% for customer in customer %}
                {
                id: "{{ customer.id }}",
                value: "{{ customer.name }}",
                label: "{{ customer.name }}",
                contact: "{{ customer.phone }}",
                gst: "{{ customer.gst_number }}",
                address: "{{ customer.city }}, {{ customer.state }}, {{ customer.country }} - {{ customer.pincode }}"
            },
            {% endfor %}
            ];

        //    auto complete prediction and onclick clear input 

        $("#customerInput").autocomplete({
            source: customers,
            select: function (event, ui) {
                var selectedCustomer = ui.item;
                console.log("Selected customer details:", customerdetails);

                // Set the input field value to the selected customer's name
                $("#customerInput").val(selectedCustomer.label);

                // Perform an AJAX request to update the order's customer field
                updateOrderCustomer(selectedCustomer.id);

                // Prevent the default autocomplete behavior (which may replace the input value)
                return false;
            }
        }).on("focus", function () {
            // Clear the input field when it is clicked
            $(this).val("");
        });

        // ajax funtion to add customer in to order it will add upon input the form 

        function updateOrderCustomer(customerId) {
            console.log("Updating order with customer ID:",); // Debug log
            $.ajax({
                url: "{% url 'update_order_customer' %}",
                type: "POST",
                data: {
                    csrfmiddlewaretoken: '{{ csrf_token }}',
                    
                    customer_id: customerId
                },
                success: function (response) {
                    console.log("Order customer updated successfully.");
                    // Update the customerdetails element with the response HTML
                    $("#customerdetails").html(response.html);
                },
                error: function (xhr, errmsg, err) {
                    console.log("Error updating order customer:", errmsg);
                }
            });
        }
        });


        // order added to the item table 


        $(document).on('click', '.add-to-order', function (e) {
            e.preventDefault();
            var productId = $(this).data('product-id');
            $.ajax({
                url: "{% url 'add_order_item' order.id %}",
                type: "POST",
                data: {
                    csrfmiddlewaretoken: '{{ csrf_token }}',
                    product_id: productId
                },
                success: function (response) {
                    if (response.success) {
                        console.log("Add To order success....")
                        $("#orderItemsTable").html(response.html);
                    } else {
                        alert(response.error);
                    }
                },
                error: function (xhr, errmsg, err) {
                    console.log("Error adding product to order:", errmsg);
                }
            });
        });



        // increase quantity of item 
        $(document).on('click', '.increase-quantity, .decrease-quantity', function (e) {
            e.preventDefault();
            var itemId = $(this).data('item-id');
            var action = $(this).hasClass('increase-quantity') ? 'increase' : 'decrease';
            $.ajax({
                url: "{% url 'update_order_item_quantity' %}",
                type: "POST",
                data: {
                    csrfmiddlewaretoken: '{{ csrf_token }}',
                    item_id: itemId,
                    action: action
                },
                success: function (response) {
                    if (response.success) {
                        $("#orderItemsTable").html(response.html);
                    } else {
                        alert(response.error);
                    }
                },
                error: function (xhr, errmsg, err) {
                    console.log("Error updating order item quantity:", errmsg);
                }
            });
        });

    </script>
</body>

</html>